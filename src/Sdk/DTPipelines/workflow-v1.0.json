{
  "version": "workflow-v1.0",

  "definitions": {

    "workflow-root": {
      "description": "Workflow file",
      "mapping": {
        "properties": {
          "on": "any",
          "name": "scalar",
          "jobs": "jobs"
        }
      }
    },

    "actions-template-root": {
      "description": "Actions template file",
      "mapping": {
        "properties": {
          "inputs": "actions-template-inputs",
          "outputs": "actions-template-outputs",
          "actions": "actions-in-template"
        }
      }
    },

    "actions-scope-inputs": {
      "description": "Used when evaluating actions scope inputs",
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "actions-scope-input-value"
      }
    },

    "actions-scope-input-value": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions",
        "inputs"
      ],
      "one-of": [
        "scalar",
        "sequence",
        "mapping"
      ]
    },

    "actions-scope-outputs": {
      "description": "Used when evaluating actions scope outputs",
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "actions-scope-output-value"
      }
    },

    "actions-scope-output-value": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions",
        "inputs"
      ],
      "scalar": {}
    },

    "actions-template-inputs": {
      "description": "Allowed inputs in an actions template",
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "actions-template-input-value"
      }
    },

    "actions-template-input-value": {
      "description": "Default input values for an actions template",
      "context": [
        "strategy",
        "matrix",
        "parallel"
      ],
      "one-of": [
        "scalar",
        "sequence",
        "mapping"
      ]
    },

    "actions-template-outputs": {
      "description": "Output mapping for an actions template",
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "actions-template-output-value"
      }
    },

    "actions-template-output-value": {
      "description": "Output values for an actions template",
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions"
      ],
      "scalar": {}
    },

    "jobs": {
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "job"
      }
    },

    "job": {
      "mapping": {
        "properties": {
          "needs": "needs",
          "strategy": "strategy",
          "name": "scalar-strategy-context",
          "runs-on": "runs-on",
          "timeout": "scalar-strategy-context",
          "cancel-timeout": "scalar-strategy-context",
          "continue-on-error": "non-empty-scalar",
          "actions": "actions"
        }
      }
    },

    "needs": {
      "one-of": [
        "sequence-of-non-empty-scalar",
        "scalar"
      ]
    },

    "strategy": {
      "mapping": {
        "properties": {
          "fail-fast": "boolean",
          "max-parallel": "non-empty-scalar",
          "matrix": "matrix",
          "parallel": "non-empty-scalar"
        }
      }
    },

    "matrix": {
      "mapping": {
        "properties": {
          "include": "matrix-include",
          "exclude": "matrix-exclude"
        },
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "sequence"
      }
    },

    "matrix-include": {
      "sequence": {
        "item-type": "matrix-include-item"
      }
    },

    "matrix-include-item": {
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "any"
      }
    },

    "matrix-exclude": {
      "sequence": {
        "item-type": "matrix-exclude-item"
      }
    },

    "matrix-exclude-item": {
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "matrix-exclude-filter-item"
      }
    },

    "matrix-exclude-filter-item": {
      "one-of": [
        "scalar",
        "matrix-exclude-mapping-filter"
      ]
    },

    "matrix-exclude-mapping-filter": {
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "matrix-exclude-filter-item"
      }
    },

    "runs-on": {
      "context": [
        "strategy",
        "matrix",
        "parallel"
      ],
      "one-of": [
        "runs-on-scalar",
        "runs-on-mapping"
      ]
    },

    "runs-on-scalar": {
      "scalar": {
        "require-non-empty": true
      }
    },

    "runs-on-mapping": {
      "mapping": {
        "properties": {
          "pool": "non-empty-scalar"
        }
      }
    },

    "actions": {
      "sequence": {
        "item-type": "actions-item"
      }
    },

    "actions-in-template": {
      "sequence": {
        "item-type": "actions-item-in-template"
      }
    },

    "actions-item": {
      "one-of": [
        "checkout-action",
        "run-action",
        "regular-action",
        "actions-template-reference"
      ]
    },

    "actions-item-in-template": {
      "one-of": [
        "checkout-action-in-template",
        "run-action-in-template",
        "regular-action-in-template",
        "actions-template-reference-in-template"
      ]
    },

    "checkout-action": {
      "mapping": {
        "properties": {
          "name": "scalar-actions-context",
          "id": "non-empty-scalar",
          "if": "scalar",
          "timeout": "non-empty-scalar",
          "checkout": "non-empty-scalar",
          "path": "scalar-actions-context",
          "clean": "scalar-actions-context",
          "fetch-depth": "scalar-actions-context",
          "lfs": "scalar-actions-context",
          "submodules": "scalar-actions-context"
        }
      }
    },

    "checkout-action-in-template": {
      "mapping": {
        "properties": {
          "name": "scalar-actions-context-in-template",
          "id": "non-empty-scalar",
          "if": "scalar",
          "timeout": "non-empty-scalar",
          "checkout": "non-empty-scalar",
          "path": "scalar-actions-context-in-template",
          "clean": "scalar-actions-context-in-template",
          "fetch-depth": "scalar-actions-context-in-template",
          "lfs": "scalar-actions-context-in-template",
          "submodules": "scalar-actions-context-in-template"
        }
      }
    },

    "run-action": {
      "mapping": {
        "properties": {
          "name": "scalar-actions-context",
          "id": "non-empty-scalar",
          "if": "scalar",
          "timeout": "non-empty-scalar",
          "run": "scalar-actions-context",
          "env": "action-env",
          "working-directory": "scalar-actions-context"
        }
      }
    },

    "run-action-in-template": {
      "mapping": {
        "properties": {
          "name": "scalar-actions-context-in-template",
          "id": "non-empty-scalar",
          "if": "scalar",
          "timeout": "non-empty-scalar",
          "run": "scalar-actions-context-in-template",
          "env": "action-env-in-template",
          "working-directory": "scalar-actions-context-in-template"
        }
      }
    },

    "regular-action": {
      "mapping": {
        "properties": {
          "name": "scalar-actions-context",
          "id": "non-empty-scalar",
          "if": "scalar",
          "timeout": "non-empty-scalar",
          "uses": "non-empty-scalar",
          "with": "action-with",
          "env": "action-env"
        }
      }
    },

    "regular-action-in-template": {
      "mapping": {
        "properties": {
          "name": "scalar-actions-context-in-template",
          "id": "non-empty-scalar",
          "if": "scalar",
          "timeout": "non-empty-scalar",
          "uses": "non-empty-scalar",
          "with": "action-with-in-template",
          "env": "action-env-in-template"
        }
      }
    },

    "actions-template-reference": {
      "mapping": {
        "properties": {
          "template": "non-empty-scalar",
          "id": "non-empty-scalar",
          "inputs": "actions-template-reference-inputs"
        }
      }
    },

    "actions-template-reference-in-template": {
      "mapping": {
        "properties": {
          "template": "non-empty-scalar",
          "id": "non-empty-scalar",
          "inputs": "actions-template-reference-inputs-in-template"
        }
      }
    },

    "actions-template-reference-inputs": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions"
      ],
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "scalar"
      }
    },

    "actions-template-reference-inputs-in-template": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions",
        "inputs"
      ],
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "scalar"
      }
    },

    "action-env": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions"
      ],
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "scalar"
      }
    },

    "action-env-in-template": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions",
        "inputs"
      ],
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "scalar"
      }
    },

    "action-with": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions"
      ],
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "scalar"
      }
    },

    "action-with-in-template": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions",
        "inputs"
      ],
      "mapping": {
        "loose-key-type": "non-empty-scalar",
        "loose-value-type": "scalar"
      }
    },

    "boolean": {
      "one-of": [
        "true",
        "false"
      ]
    },

    "true": {
      "scalar": {
        "constant": true,
        "ignore-case": true
      }
    },

    "false": {
      "scalar": {
        "constant": false,
        "ignore-case": true
      }
    },

    "non-empty-scalar": {
      "scalar": {
        "require-non-empty": true
      }
    },

    "sequence-of-non-empty-scalar": {
      "sequence": {
        "item-type": "non-empty-scalar"
      }
    },

    "scalar-strategy-context": {
      "context": [
        "strategy",
        "matrix",
        "parallel"
      ],
      "scalar": {}
    },

    "scalar-actions-context": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions"
      ],
      "scalar": {}
    },

    "scalar-actions-context-in-template": {
      "context": [
        "strategy",
        "matrix",
        "parallel",
        "secrets",
        "actions",
        "inputs"
      ],
      "scalar": {}
    }
  }
}